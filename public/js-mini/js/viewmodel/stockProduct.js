define(["knockout","validation","validationConfig"],function(e){return function(t){var n=this;n.sku=e.observable().extend({required:{message:"产品款号不能为空"},pattern:{message:"款号只能是字母,数字,_,-,#组合",params:"^[a-zA-Z0-9_#-]+$"},validation:{validator:uniqueInObservableArray,message:"该产品已存在于进货单中",params:t.stockProducts()}}),n.name=e.observable(),n.cost=e.observable().extend({required:{message:"进货价不能为空"},number:{message:"进货价必须为数字"}}),n.stock=e.observable(1).extend({required:{message:"数量不能为空"},number:{message:"数量必须位数字"},min:{params:1,message:"数量必须大于1"}}),n.pictures=e.observableArray(),n.price=e.observable().extend({number:{message:"零售价必须为数字"}}),n.showProgress=e.observable(!1),n.description=e.observable(),n.removePicture=function(e){n.pictures.remove(e)},n.reset=function(){var t=e.validatedObservable(n);n.sku(""),n.name(""),n.cost(""),n.stock(1),n.pictures.removeAll(),n.price(""),n.description(""),t.errors.showAllMessages(!1)},n.submitTo=function(){var r=e.validatedObservable(n);r.isValid()?(t.addItem(n),n.reset()):r.errors.showAllMessages()}}});
define(["knockout","knockoutMapping","formPost","message","validation","validationConfig"],function(e,t,n,r){return function(){var i=this;i.id=e.observable(),i.name=e.observable(),i.phoneNumber=e.observable().extend({required:{message:"客户手机号不能为空"},number:{message:"手机号格式不正确"}}),i.wechat=e.observable(),i.qq=e.observable(),i.isVip=e.observable(!1),i.remark=e.observable(),i.reset=function(){i.name(""),i.phoneNumber(""),i.wechat(""),i.qq(""),i.isVip(!1),i.remark("")},i.submitAndContinue=function(e,s){s.preventDefault();if(i.phoneNumber.isValidating())return $(".submitTo").button("loading"),setTimeout(function(){i.submitAndContinue(e)},50),!1;$(".submitTo").button("reset");var o=t.toJSON(i);n.submit({viewModel:i,url:"/customer/edit-customer",data:{customer:o},success:function(){r.success("保存成功"),typeof e=="function"&&e()}})},i.submit=function(){i.submitAndContinue(function(){location.href="/customer/index"})},i.init=function(){for(protype in i)if(e.isWriteableObservable(i[protype])){var t=$("#"+protype);if(t.length>0){var n=t.attr("data-value");n!=""&&(n=="true"?n=!0:n=="false"&&(n=!1),i[protype](n))}}},i.init()}});
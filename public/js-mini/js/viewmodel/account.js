define(["knockout","knockoutMapping","formPost","message","validation","validationConfig"],function(e,t,n,r){return function(){var i=this;i.name=e.observable().extend({required:{message:"用户姓名不能为空"}}),i.selectedRole=e.observable(),i.role=e.observable(),i.username=e.observable().extend({required:{message:"登录名不能为空"},isUsernameExists:i}),i.password=e.observable().extend({required:{message:"请输入密码"}}),i.confirm=e.observable().extend({required:{message:"请再次输入密码"},areSame:i.password}),i.reset=function(){i.name(""),i.username(""),i.password(""),i.confirm("")},i.submitAndContinue=function(e){if(i.username.isValidating())return $(".submitTo").button("loading"),setTimeout(function(){i.submitAndContinue(e)},50),!1;$(".submitTo").button("reset");var s=t.toJSON(i);n.submit({viewModel:i,url:"/account/create-account",data:{account:s},success:function(){i.reset(),r.success("添加成功"),typeof e=="function"&&e()}})},i.submit=function(){i.submitAndContinue(function(){location.href="/account/index"})}}});
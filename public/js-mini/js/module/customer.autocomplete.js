define(["jquery","typeahead","underscore","lib/json2"],function(e){return function(t){var n=[];e("#phone_number").typeahead({items:5,source:function(t,r){if(typeof n=="object"&&n.length<=0)e.getJSON("/Customer/get-customers-json",{query:t},function(e){n=e;var t=_.map(n,function(e){return e.phoneNumber});r(t)});else{var i=_.map(n,function(e){return e.phoneNumber});r(i)}},highlighter:function(e){var t=_.find(n,function(t){return t.phoneNumber==e}),r=t.name?t.name+":":"";return t.isVip?"<div>"+r+t.phoneNumber+' <span style="color:#ac2925;"> (VIP)</span></div>':r+t.phoneNumber},updater:function(e){return t(e,n)}})}});
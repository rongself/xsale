define(["jquery","knockout","message"],function(e,t,n){return{submit:function(r){var i={viewModel:"",url:"",data:"",success:"",fail:""};r=e.extend(i,r);var s=t.validatedObservable(r.viewModel);s.isValid()?e.ajax({url:r.url,type:"POST",data:r.data,dataType:"json"}).done(function(e){if(e.success)typeof r.success=="function"&&r.success(),s.errors.showAllMessages(!1);else for(key in e.errors)typeof r.viewModel[key]=="function"&&typeof e.errors[key]!="undefined"?r.viewModel[key].setError(e.errors[key]):n.error(e.errors[key])},"json").fail(function(){n.error("网络传输错误,请稍后再试"),typeof r.fail=="function"&&r.fail()}):s.errors.showAllMessages()}}});
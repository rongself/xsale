define(["jquery","message"],function(e,t){return function(n){var r={checkbox:"#checkAll",handler:"#formControl",deleteUrl:""};n=e.extend(r,n),e(n.checkbox).bind({change:function(t){var n=this;e(n).is(":checked")?e(".ids").prop("checked",!0):e(".ids").prop("checked",!1)}}),e(n.handler).bind("change",function(){var r=[],i=this;e(".ids:checked").each(function(){r.push(e(this).val())});switch(e(i).val()){case"delete":r.length>0?confirm("是否要删除这"+r.length+"个项目?")?e.post(n.deleteUrl,{ids:r},function(n){if(n.success)t.success("操作成功"),location.reload();else{for(key in n.errors)t.error(n.errors[key]);e(i).val("handle")}},"json").fail(function(){t.error("Ajax传输失败"),e(i).val("handle")}):e(i).val("handle"):(t.error("未选择任何项目"),e(i).val("handle"));break;default:}})}});
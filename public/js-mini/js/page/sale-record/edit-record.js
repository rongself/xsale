require(["knockout","viewmodel/editSaleRecord","viewmodel/saleProduct","module/sku.autocomplete","module/customer.autocomplete","message","module/number","datetimepicker","validation","typeahead","underscore"],function(e,t,n,r,i,s){saleRecord=new t,saleProduct=new n,saleRecord.editItem=function(e){saleProduct.sku()?s.info("请先保存正在添加的产品"):(saleRecord.removeItem(e),saleProduct.sku(e.sku()),saleProduct.quantity(e.quantity()),saleProduct.price(e.price()),saleProduct.remark(e.remark()))},$("#startTime").datetimepicker({pickTime:!1,language:"zh-CN"}),$("#startTime").on("dp.change",function(e){saleRecord.orderTime(moment(e.date).format("YYYY-MM-DD"))}),saleProduct.sku.extend({validation:{validator:uniqueInObservableArray,message:"该产品已存在于账单中",params:saleRecord.saleProducts()}});var o=new r(function(e,t){var n=_.find(t,function(t){return t.sku==e});return n.price&&saleProduct.price(n.price),saleProduct.price()==null?$("#price").focus():$("#submitTo").focus(),e}),i=new i(function(e,t){var n=_.find(t,function(t){return t.phoneNumber==e});return n.name&&saleRecord.customerName(n.name),e});e.applyBindings(saleRecord)});